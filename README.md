# my:Store)

[![Build Status](https://travis-ci.org/JIeIIIa/mystore.svg?branch=master)](https://travis-ci.org/JIeIIIa/mystore)
[![Coverage Status](https://coveralls.io/repos/github/JIeIIIa/mystore/badge.svg?branch=master)](https://coveralls.io/github/JIeIIIa/mystore?branch=master)

## Тестове завдання на знання Java EE (servlets) та Javascript/jQuery.

Створити веб-додаток mystore використовуючи Java Servlets.

Додаток має повертати веб сторінки з статичних HTML файлів в WAR-архіві (самі файли недоступні з зовні) 
по наступним URL відносно серверу:

| Файл| Відносний URL |
|----|----|
| home.html | /mystore |
| shop.html | /mystore/shop |
| success.html | /mystore/shop/success |
| failure.html | /mystore/shop/failure |

### Бекенд

 * **_Каталог товарів_** (назва, артикул, ціна) - внутрішня колекція що заповнюється при ініціалізації 
   сервлета `/mystore/shop/items` з csv-файлу в папці `/data` серверу Tomcat. 
   Каталог має регулярно оновлюватися (замінюватися) окремим процесом з файлу даних кожні 5хв. 
   Вміст каталогу завжди доступний для обробки запитів кліентів. 
   Каталог завжди повністю відповідає вмісту конкретного файлу даних - 
   весь асортимент та ціни лише з одного, поточного, файлу.
   
 * **_Сервлет+JSP_**: `/mystore/shop/items` - читає весь доступний товар з каталогу та 
   повертає **HTML** для відображення на кліенті. 

 * **_Сервлет+JSP_**: `/mystore/shop/basket` - сторінка підтвердження покупки, відображає обрані 
   товари (один чи декілька) з запиту кліента. Сторінка попередньо валідує запит з каталогом
   перед поверненням респонсу, містить кнопку **_Buy_**, в разі якщо запит містить не існуючий 
   артикул має відобразити його червоним та не використовувати в покупці.
   
 * **_Сервлет_**: `/mystore/buyService` - приймає запит з списком артикулів, валідує за каталогом, 
   та зберігає їх в файл серверу '/data/order-TIMESTAMP.csv', де 
   _TIMESTAMP_ - поточний час на сервері. В разі успішного створення файлу сервлет 
   повертає статус `201`, в разі не існуючого товару `400`, в разі іншої помилки `500`.
   Сюди товар має прийти тіки той що є в каталозі, але якщо інше - то всю покупку відхиляємо.

### Фронтенд

Контент сторінок створи довільний. 

* Сторінка `/mystore` має лінк на `/mystore/shop`. 

* Треба використати **Javascript** та **jQuery** для того щоб завантажи на `/mystore/shop` контент 
  з URL `/mystore/shop/items` в `<div>` елемент на цій сторінці (декілька товарів з назвами).
  Іншими словами фрагмент **HTML**, який отримуємо в результаті **jQuery** запиту потрібно 
  вставити на сторінку `/mystore/shop` в `<div>`
 
* На `/mystore/shop` користувач може вибирати (через checkbox) з завантаженних `/mystore/shop/items` 
  товарів та, натиснувши кнопку **_To Basket_**, завантажити в поточному вікні сторінку 
  `/mystore/shop/basket`, де обрані елементи будуть передані в запиті як 
  `/mystore/shop/basket?items=art1,art2,...,artN`.

* Сторінка `/mystore/shop/basket` має кнопку **_Buy_**, при натисканні якої виконується 
  асинхроний запит до сервлету `/mystore/buyService` методом `POST`. 
  Сервлет має повернути статус `201` в разі успіху. 
  Сторінка має розрізняти статуси та в разі `201` перейти на `/myapp/shop/success`, 
  якщо повернуто помилку то на `/mystore/shop/failure`.

* На сторінках `/mystore/shop/success` та `/mystore/shop/failure` відображати 
  просто дружній меседж користувачеві.

Стиль сторінок оформи простим **CSS** - вирівнювання та відступи, 
щоб було приглядно на різних розмірах сторінки (responsive по можливості).